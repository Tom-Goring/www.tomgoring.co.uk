(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[,function(e,t,n){"use strict";n.r(t);var r=n(2),o=n(3);n(4);const c=r.a.new(),a=c.width(),i=c.height();let s=new ArrayBuffer(16);for(var u=new Uint8Array(s),b=0;b<16;b++)u[b]=0;const l=document.getElementById("chip8-canvas");l.height=19*i+1,l.width=19*a+1;const f=l.getContext("2d");document.getElementById("files").addEventListener("change",(function(){const e=this.files[0];var t=new FileReader;t.onload=function(){var e=t.result,n=new Uint8Array(e);c.load(n)},t.readAsArrayBuffer(e)})),document.getElementById("reset").addEventListener("click",e=>{c.trigger_reset()});const d=(e,t)=>e*a+t,h=()=>{const e=c.pixels(),t=new Uint8Array(o.q.buffer,e,a*i);f.beginPath();for(let e=0;e<i;e++)for(let n=0;n<a;n++){const r=d(e,n);f.fillStyle=0===t[r]?"#000000":"#FFFFFF",f.fillRect(18*n,18*e,18,18)}f.stroke()};l.addEventListener("keydown",(function(e){switch(e.keyCode){case 49:u[0]=1;break;case 50:u[1]=1;break;case 51:u[2]=1;break;case 52:u[3]=1;break;case 81:u[4]=1;break;case 87:u[5]=1;break;case 69:u[6]=1;break;case 82:u[7]=1;break;case 65:u[8]=1;break;case 83:u[9]=1;break;case 68:u[10]=1;break;case 70:u[11]=1;break;case 90:u[12]=1;break;case 88:u[13]=1;break;case 67:u[14]=1;break;case 86:u[15]=1}}),!0),l.addEventListener("keyup",(function(e){switch(e.keyCode){case 49:u[0]=0;break;case 50:u[1]=0;break;case 51:u[2]=0;break;case 52:u[3]=0;break;case 81:u[4]=0;break;case 87:u[5]=0;break;case 69:u[6]=0;break;case 82:u[7]=0;break;case 65:u[8]=0;break;case 83:u[9]=0;break;case 68:u[10]=0;break;case 70:u[11]=0;break;case 90:u[12]=0;break;case 88:u[13]=0;break;case 67:u[14]=0;break;case 86:u[15]=0}}),!0);var p=window.AudioContext&&new AudioContext||window.webkitAudioContext&&new webkitAudioContext;setInterval((function(){c.set_key_array(u),c.sound_timer()>0&&function(){if(p){var e=p.createOscillator(),t=p.createGain();e.connect(t),t.connect(p.destination),e.type="square",t.gain.value=.01,e.start(),setTimeout((function(){e.stop()}),1e3/60)}}(),c.tick()}),2),requestAnimationFrame((function e(){h(),requestAnimationFrame(e)}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"f",(function(){return C})),n.d(t,"g",(function(){return y})),n.d(t,"c",(function(){return m})),n.d(t,"e",(function(){return G})),n.d(t,"b",(function(){return E})),n.d(t,"d",(function(){return F})),n.d(t,"i",(function(){return D})),n.d(t,"h",(function(){return B}));var r=n(3);let o=null;function c(){return null!==o&&o.buffer===r.q.buffer||(o=new Uint8Array(r.q.buffer)),o}let a=0;function i(e){const t=r.c(1*e.length);return c().set(e,t/1),a=e.length,t}const s=new Array(32);function u(e){return s[e]}s.fill(void 0),s.push(void 0,null,!0,!1);let b=s.length;function l(e){const t=u(e);return function(e){e<36||(s[e]=b,b=e)}(e),t}let f=new TextDecoder("utf-8");function d(e,t){return f.decode(c().subarray(e,e+t))}function h(e){b===s.length&&s.push(s.length+1);const t=b;return b=s[t],s[t]=e,t}let p,k=new TextEncoder("utf-8");p="function"==typeof k.encodeInto?function(e){let t=e.length,n=r.c(t),o=0;{const t=c();for(;o<e.length;o++){const r=e.charCodeAt(o);if(r>127)break;t[n+o]=r}}if(o!==e.length){e=e.slice(o),n=r.d(n,t,t=o+3*e.length);const a=c().subarray(n+o,n+t);o+=k.encodeInto(e,a).written}return a=o,n}:function(e){let t=e.length,n=r.c(t),o=0;{const t=c();for(;o<e.length;o++){const r=e.charCodeAt(o);if(r>127)break;t[n+o]=r}}if(o!==e.length){const a=k.encode(e.slice(o));n=r.d(n,t,t=o+a.length),c().set(a,n+o),o+=a.length}return a=o,n};let A=null;function w(){return null!==A&&A.buffer===r.q.buffer||(A=new Int32Array(r.q.buffer)),A}class g{static __wrap(e){const t=Object.create(g.prototype);return t.ptr=e,t}free(){const e=this.ptr;this.ptr=0,r.a(e)}static new(){const e=r.h();return g.__wrap(e)}height(){return r.f(this.ptr)>>>0}width(){return r.p(this.ptr)>>>0}pixels(){return r.j(this.ptr)}sound_timer(){return r.l(this.ptr)}get_index(e,t){return r.e(this.ptr,e,t)>>>0}trigger_reset(){r.o(this.ptr)}pause(){r.i(this.ptr)}start(){r.m(this.ptr)}load(e){r.g(this.ptr,i(e),a)}set_key_array(e){r.k(this.ptr,i(e),a)}tick(){r.n(this.ptr)}}const C=function(e){l(e)},y=function(e,t){return h(d(e,t))},m=function(){return h(new Error)},G=function(e,t){const n=u(t).stack,r=p(n),o=a;w()[e/4+0]=r,w()[e/4+1]=o},E=function(e,t){const n=d(e,t).slice();r.b(e,1*t),console.error(n)},F="function"==typeof Math.random?Math.random:(v="Math.random",()=>{throw new Error(`${v} is not defined`)});var v;const D=function(e){console.log(u(e))},B=function(e,t){throw new Error(d(e,t))}},function(e,t,n){"use strict";var r=n.w[e.i];e.exports=r;n(2);r.r()},function(e,t){var n=new(window.AudioContext||window.webkitAudioContext),r=null,o=null,c={C0:16.35,"C#0":17.32,Db0:17.32,D0:18.35,"D#0":19.45,Eb0:19.45,E0:20.6,F0:21.83,"F#0":23.12,Gb0:23.12,G0:24.5,"G#0":25.96,Ab0:25.96,A0:27.5,"A#0":29.14,Bb0:29.14,B0:30.87,C1:32.7,"C#1":34.65,Db1:34.65,D1:36.71,"D#1":38.89,Eb1:38.89,E1:41.2,F1:43.65,"F#1":46.25,Gb1:46.25,G1:49,"G#1":51.91,Ab1:51.91,A1:55,"A#1":58.27,Bb1:58.27,B1:61.74,C2:65.41,"C#2":69.3,Db2:69.3,D2:73.42,"D#2":77.78,Eb2:77.78,E2:82.41,F2:87.31,"F#2":92.5,Gb2:92.5,G2:98,"G#2":103.83,Ab2:103.83,A2:110,"A#2":116.54,Bb2:116.54,B2:123.47,C3:130.81,"C#3":138.59,Db3:138.59,D3:146.83,"D#3":155.56,Eb3:155.56,E3:164.81,F3:174.61,"F#3":185,Gb3:185,G3:196,"G#3":207.65,Ab3:207.65,A3:220,"A#3":233.08,Bb3:233.08,B3:246.94,C4:261.63,"C#4":277.18,Db4:277.18,D4:293.66,"D#4":311.13,Eb4:311.13,E4:329.63,F4:349.23,"F#4":369.99,Gb4:369.99,G4:392,"G#4":415.3,Ab4:415.3,A4:440,"A#4":466.16,Bb4:466.16,B4:493.88,C5:523.25,"C#5":554.37,Db5:554.37,D5:587.33,"D#5":622.25,Eb5:622.25,E5:659.26,F5:698.46,"F#5":739.99,Gb5:739.99,G5:783.99,"G#5":830.61,Ab5:830.61,A5:880,"A#5":932.33,Bb5:932.33,B5:987.77,C6:1046.5,"C#6":1108.73,Db6:1108.73,D6:1174.66,"D#6":1244.51,Eb6:1244.51,E6:1318.51,F6:1396.91,"F#6":1479.98,Gb6:1479.98,G6:1567.98,"G#6":1661.22,Ab6:1661.22,A6:1760,"A#6":1864.66,Bb6:1864.66,B6:1975.53,C7:2093,"C#7":2217.46,Db7:2217.46,D7:2349.32,"D#7":2489.02,Eb7:2489.02,E7:2637.02,F7:2793.83,"F#7":2959.96,Gb7:2959.96,G7:3135.96,"G#7":3322.44,Ab7:3322.44,A7:3520,"A#7":3729.31,Bb7:3729.31,B7:3951.07,C8:4186.01,"C#8":4435,D8:4699,Eb8:4978,E8:5274,F8:5588,"F#8":5920,G8:6272,"G#8":6645,A8:7040,Bb8:7459,B8:7902},a={C:[261.6,329.6,392],Cm:[261.6,311.1,392],"C#":[277.2,349.2,415.3],D:[293.7,370,440],Dm:[293.7,349.2,440],"D#":[311.1,392,466.2],E:[329.6,415.3,493.9],Em:[329.6,392,493.9],F:[349.2,440,523.251],Fm:[349.2,415.3,523.251],"F#":[370,554.365,466.2],G:[392,493.9,587.33],Gm:[392,466.2,587.33],"G#":[466.2,523.251,622.254],A:[440,554.365,659.255],Am:[440,523.251,659.255],"A#":[466.2,587.33,698.456],B:[493.9,622.254,739.989],Bm:[493.9,587.33,739.989]};playTone=(e,t,i)=>{void 0===t&&(t="sine"),void 0===i&&(i=1.3),void 0===e&&(e=440),r=n.createOscillator(),o=n.createGain(),r.connect(o),r.type=t,"string"==typeof e?void 0===c[e]?(r.frequency.value=a[e][0],completeChord(a[e][1],t,i),completeChord(a[e][2],t,i)):void 0===a[e]&&(r.frequency.value=c[e]):"object"==typeof e?(r.frequency.value=e[0],completeChord(e[1],t,i),completeChord(e[2],t,i)):r.frequency.value=e,o.connect(n.destination),r.start(0),o.gain.exponentialRampToValueAtTime(1e-4,n.currentTime+i)},completeChord=(e,t,r)=>{osc=n.createOscillator(),gn=n.createGain(),osc.connect(gn),osc.type=t,osc.frequency.value=e,gn.connect(n.destination),osc.start(0),gn.gain.exponentialRampToValueAtTime(1e-4,n.currentTime+r)}}]]);